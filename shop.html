<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shop - Aesthetic Clothing Admin</title>
<style>
  body { margin:0; font-family: Arial,sans-serif; background:#eaf6ff; }
  .navbar { display:flex; justify-content:space-between; align-items:center; padding:15px 40px; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
  .logo { font-size:22px; font-weight:bold; color:#0077cc; }
  .navbar ul { list-style:none; display:flex; gap:20px; margin:0; padding:0; }
  .navbar ul li a { text-decoration:none; color:#333; font-weight:500; }
  .navbar ul li a:hover { color:#0077cc; }
  .admin { color:#0077cc; font-weight:bold; }
  .container { max-width:1100px; margin:50px auto; background:#fff; padding:30px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.08); }
  h2 { text-align:center; color:#0077cc; }
  table { width:100%; border-collapse:collapse; margin-top:20px; }
  table th, table td { padding:12px; border:1px solid #ddd; text-align:center; }
  table th { background:#d6ecff; }
  .btn { background:#0077cc; color:white; padding:8px 14px; border:none; border-radius:6px; cursor:pointer; }
  .btn:hover { background:#005fa3; }
  .form-inline { display:flex; flex-wrap:wrap; gap:12px; margin-bottom:20px; }
  .form-inline input, .form-inline select { padding:10px; border:1px solid #ddd; border-radius:6px; flex:1; min-width:160px; }
  .status-available { color:green; font-weight:bold; }
  .status-outofstock { color:red; font-weight:bold; }
</style>
</head>
<body>

<div class="navbar">
  <div class="logo">üõçÔ∏è Aesthetic Clothing</div>
  <ul>
    <li><a href="Homead.html">HOME</a></li>
    <li><a href="shop.html">SHOP</a></li>
    <li><a href="odd.html">ORDERS</a></li>
    <li><a href="Cust.html">CUSTOMERS</a></li>
    <li><a href="Inv.html">INVOICES</a></li>
  </ul>
  <div class="admin">üë§ Admin</div>
</div>

<div class="container">
  <h2>Manage Products üõí</h2>
  <form id="productForm" class="form-inline">
    <input type="text" id="productName" placeholder="Product Name" required>
    <input type="number" id="price" placeholder="Price ($)" min="1" required>
    <input type="number" id="stock" placeholder="Stock Qty" min="0" required>
    <select id="availability" required>
      <option value="">-- Availability --</option>
      <option value="Available">Available</option>
      <option value="OutOfStock">Out of Stock</option>
    </select>
    <input type="text" id="img" placeholder="Image URL (optional)">
    <button type="submit" class="btn">Add Product</button>
  </form>

  <table id="productTable">
    <thead>
      <tr>
        <th>Product ID</th>
        <th>Name</th>
        <th>Price ($)</th>
        <th>Stock</th>
        <th>Availability</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
const productForm = document.getElementById("productForm");
const productTable = document.querySelector("#productTable tbody");

// Load products and merge cart items
function loadProducts() {
  let products = JSON.parse(localStorage.getItem("products")) || [];
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  // Merge cart items
  cart.forEach(c => {
    if(!products.find(p => p.name === c.name)) {
      products.push({
        id: products.length ? products[products.length - 1].id + 1 : 1,
        name: c.name,
        price: c.price,
        stock: c.quantity,
        availability: "Available",
        img: c.img || 'images/default.jpg'
      });
    }
  });

  localStorage.setItem("products", JSON.stringify(products));

  productTable.innerHTML = "";
  products.forEach(p => {
    let row = document.createElement("tr");
    row.innerHTML = `
      <td>${p.id}</td>
      <td>${p.name}</td>
      <td>${p.price}</td>
      <td>${p.stock}</td>
      <td class="status-${p.availability.toLowerCase()}">${p.availability}</td>
      <td><button class="btn deleteBtn">Delete</button></td>
    `;
    productTable.appendChild(row);
    row.querySelector(".deleteBtn").addEventListener("click", () => deleteProduct(p.id));
  });
}

// Add new product
productForm.addEventListener("submit", function(e) {
  e.preventDefault();
  let products = JSON.parse(localStorage.getItem("products")) || [];
  const newProduct = {
    id: products.length ? products[products.length - 1].id + 1 : 1,
    name: document.getElementById("productName").value,
    price: parseFloat(document.getElementById("price").value),
    stock: parseInt(document.getElementById("stock").value),
    availability: document.getElementById("availability").value,
    img: document.getElementById("img").value || 'images/default.jpg'
  };
  products.push(newProduct);
  localStorage.setItem("products", JSON.stringify(products));
  loadProducts();
  productForm.reset();
});

// Delete product
function deleteProduct(id) {
  let products = JSON.parse(localStorage.getItem("products")) || [];
  products = products.filter(p => p.id !== id);
  localStorage.setItem("products", JSON.stringify(products));
  loadProducts();
}

window.onload = loadProducts;
</script>

</body>
</html>
